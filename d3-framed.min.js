// d3-framed Version 1.0.0. Copyright 2016 Mike Frey.
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-dispatch"),require("d3-selection"),require("d3-zoom")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection","d3-zoom"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3)}(this,function(e,t,n,o){"use strict";function r(){function e(){n.event.preventDefault(),n.event.stopImmediatePropagation()}function r(e){d=e.node(),s=e.on("mousedown.framed",i)}function a(e){var t=Array.prototype.slice.call(arguments,1);n.customEvent(n.event,u.apply,u,[e,d,t])}function i(){function t(){e();var t=f().classed(c,!1),o=n.mouse(d),r=o.x,a=o.y;void 0==i&&([i,u]=[r,a]);var s=r<i?r:i,p=a<u?a:u,v=r<i?i:r,y=a<u?u:a;l.attr("x",s).attr("y",p).attr("width",v-s).attr("height",y-p),[s,p]=m.invert([s,p]),[v,y]=m.invert([v,y]),t.each(function(){var e=n.select(this),t=parseFloat(e.attr("x")||e.attr("cx"),10),o=parseFloat(e.attr("y")||e.attr("cy"),10);s<t&&t<v&&p<o&&o<y&&e.classed(c,!0)})}function r(){p.on("mousemove.framed mouseup.framed",null),l.remove(),e(),a("end",f().filter("."+c))}if(0===n.event.button){n.event.stopImmediatePropagation(),f().classed(c,!1);var i,u,p=n.select(n.event.view).on("mousemove.framed",t,!0).on("mouseup.framed",r,!0),m=o.zoomTransform(d),l=s.append("rect").attr("class","selection");a("start")}}var s,d,u=t.dispatch("start","end"),c="selected",f=function(){};return r.items=function(e){return f="function"!=typeof e?function(){return e}:e,r},r.class=function(e){return e?(c=e,r):c},r.on=function(){var e=u.on.apply(u,arguments);return e===u?r:e},r}e.framed=r,Object.defineProperty(e,"__esModule",{value:!0})});